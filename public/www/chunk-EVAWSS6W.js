import{a as z}from"./chunk-VRCABSLP.js";import{a as U}from"./chunk-T42BHAKM.js";import{a as I,b as W,c as N,d as F,e as j,f as L,g as P,j as R,l as q}from"./chunk-JLQQGME4.js";import"./chunk-XARGZZIY.js";import{c as B,f as T}from"./chunk-LE2T2ZCV.js";import"./chunk-4N62LD7P.js";import{$a as m,Da as w,Fb as V,Ia as y,Ra as S,Sa as v,Ua as M,Va as E,W as c,Wa as i,X as u,Xa as t,Ya as A,Za as h,_a as p,ab as o,bb as x,db as g,eb as _,fb as f,ia as b,ua as s,ya as C}from"./chunk-DDVZQDE5.js";import{a as k,b as D}from"./chunk-RW4GY4BD.js";var O=(l,d)=>d.id;function H(l,d){l&1&&(i(0,"div",6),A(1,"div",9),t())}function J(l,d){if(l&1){let r=h();i(0,"div",13)(1,"div",14)(2,"div",15),o(3,"Name"),t(),i(4,"div",16),o(5),t()(),i(6,"div",14)(7,"div",15),o(8,"Description"),t(),i(9,"div",17),o(10),t()(),i(11,"div",14)(12,"div",15),o(13,"Status"),t(),i(14,"span",18),o(15),t()(),i(16,"div",14)(17,"div",15),o(18,"Actions"),t(),i(19,"div",19)(20,"button",20),p("debounceClick",function(){let e=c(r).$implicit,a=m(2);return u(a.viewAsUser(e.id))}),o(21,"View"),t(),i(22,"button",21),p("debounceClick",function(){let e=c(r).$implicit,a=m(2);return u(a.openEditModal(e))}),o(23,"Edit"),t(),i(24,"button",22),p("debounceClick",function(){let e=c(r).$implicit,a=m(2);return u(a.deleteDetail(e.id))}),o(25,"Delete"),t()()()()}if(l&2){let r=d.$implicit;s(5),x(r.name||"-"),s(5),x(r.description||"-"),s(4),S(r.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),s(),x(r.active?"Active":"Inactive")}}function K(l,d){if(l&1&&(i(0,"div",7)(1,"div",10)(2,"div",11)(3,"div",12),o(4,"Name"),t(),i(5,"div",12),o(6,"Description"),t(),i(7,"div",12),o(8,"Status"),t(),i(9,"div",12),o(10,"Actions"),t()(),M(11,J,26,5,"div",13,O),t()()),l&2){let r=m();s(11),E(r.details())}}function Q(l,d){if(l&1){let r=h();i(0,"div",8)(1,"div",23)(2,"h3",24),o(3),t(),i(4,"form",25),p("ngSubmit",function(){c(r);let e=m();return u(e.saveDetail())}),i(5,"div")(6,"label",26),o(7,"Name"),t(),i(8,"input",27),f("ngModelChange",function(e){c(r);let a=m();return _(a.formData.name,e)||(a.formData.name=e),u(e)}),t()(),i(9,"div")(10,"label",26),o(11,"Description"),t(),i(12,"textarea",28),f("ngModelChange",function(e){c(r);let a=m();return _(a.formData.description,e)||(a.formData.description=e),u(e)}),t()(),i(13,"div")(14,"label",26),o(15,"Content"),t(),i(16,"textarea",29),f("ngModelChange",function(e){c(r);let a=m();return _(a.formData.book_data,e)||(a.formData.book_data=e),u(e)}),t()(),i(17,"div",30)(18,"input",31),f("ngModelChange",function(e){c(r);let a=m();return _(a.formData.active,e)||(a.formData.active=e),u(e)}),t(),i(19,"label",32),o(20,"Active"),t()(),i(21,"div",33)(22,"button",34),o(23," Save "),t(),i(24,"button",35),p("debounceClick",function(){c(r);let e=m();return u(e.closeModal())}),o(25," Cancel "),t()()()()()}if(l&2){let r=m();s(3),x(r.editingDetail()?"Edit Detail":"Create Detail"),s(5),g("ngModel",r.formData.name),s(4),g("ngModel",r.formData.description),s(4),g("ngModel",r.formData.book_data),s(2),g("ngModel",r.formData.active)}}var ae=(()=>{let d=class d{constructor(n,e,a){this.route=n,this.router=e,this.bookService=a,this.details=b([]),this.loading=b(!1),this.showModal=b(!1),this.editingDetail=b(null),this.formData={name:"",description:"",book_data:"",active:!0}}ngOnInit(){this.bookId=+this.route.snapshot.paramMap.get("bookId"),this.loadDetails()}loadDetails(){this.loading.set(!0),this.bookService.getDetails(this.bookId).subscribe({next:n=>{this.details.set(n||[]),this.loading.set(!1)},error:()=>this.loading.set(!1)})}openCreateModal(){this.editingDetail.set(null),this.formData={name:"",description:"",book_data:"",active:!0},this.showModal.set(!0)}openEditModal(n){this.editingDetail.set(n),this.formData={name:n.name||"",description:n.description||"",book_data:n.book_data||"",active:!!n.active},this.showModal.set(!0)}closeModal(){this.showModal.set(!1)}saveDetail(){let n=D(k({},this.formData),{book_id:this.bookId});(this.editingDetail()?this.bookService.updateDetail(this.editingDetail().id,n):this.bookService.createDetail(n)).subscribe({next:()=>{this.closeModal(),this.loadDetails()}})}deleteDetail(n){confirm("Are you sure you want to delete this detail?")&&this.bookService.deleteDetail(n).subscribe(()=>this.loadDetails())}viewAsUser(n){this.router.navigate(["/book-detail",n])}backToBooks(){this.router.navigate(["/admin/books"])}};d.\u0275fac=function(e){return new(e||d)(C(B),C(T),C(z))},d.\u0275cmp=w({type:d,selectors:[["app-admin-book-details"]],decls:12,vars:2,consts:[[1,"max-w-7xl","mx-auto"],[1,"flex","justify-between","items-center","mb-6"],[1,"flex","items-center","gap-3"],["appDebounceClick","",1,"text-blue-600","hover:text-blue-700",3,"debounceClick"],[1,"text-3xl","font-semibold","text-gray-900"],["appDebounceClick","",1,"bg-blue-600","text-white","px-4","py-2","rounded-md","hover:bg-blue-700",3,"debounceClick"],[1,"text-center","py-12"],[1,"bg-white","rounded-lg","shadow-sm","overflow-hidden"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","p-4","z-50"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"divide-y","divide-gray-200"],[1,"hidden","md:grid","md:grid-cols-4","bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"p-4","sm:p-5","md:grid","md:grid-cols-4","md:items-center","md:gap-x-4","space-y-3","md:space-y-0"],[1,"md:px-6","md:py-4"],[1,"md:hidden","text-[11px]","tracking-wide","font-medium","text-gray-500","uppercase","mb-1"],[1,"text-sm","leading-6","font-medium","text-gray-900"],[1,"text-sm","leading-6","text-gray-600"],[1,"inline-block","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"flex","flex-wrap","gap-2"],["appDebounceClick","",1,"btn","btn-ghost","btn-sm",3,"debounceClick"],["appDebounceClick","",1,"btn","btn-outline","btn-sm",3,"debounceClick"],["appDebounceClick","",1,"btn","btn-danger","btn-sm",3,"debounceClick"],[1,"bg-white","rounded-lg","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","name","name","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","description","rows","3",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","book_data","rows","6",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","items-center"],["type","checkbox","name","active","id","active",1,"h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded",3,"ngModelChange","ngModel"],["for","active",1,"ml-2","text-sm","text-gray-700"],[1,"flex","gap-3"],["type","submit",1,"flex-1","bg-blue-600","text-white","py-2","px-4","rounded-md","hover:bg-blue-700"],["type","button","appDebounceClick","",1,"flex-1","bg-gray-200","text-gray-800","py-2","px-4","rounded-md","hover:bg-gray-300",3,"debounceClick"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),p("debounceClick",function(){return a.backToBooks()}),o(4,"\u2190 Back"),t(),i(5,"h1",4),o(6,"Manage Book Details"),t()(),i(7,"button",5),p("debounceClick",function(){return a.openCreateModal()}),o(8," Add Detail "),t()(),y(9,H,2,0,"div",6)(10,K,13,0,"div",7)(11,Q,26,5,"div",8),t()),e&2&&(s(9),v(a.loading()?9:10),s(2),v(a.showModal()?11:-1))},dependencies:[V,q,P,W,I,N,F,R,L,j,U],encapsulation:2});let l=d;return l})();export{ae as AdminBookDetailsComponent};
