import{a as E}from"./chunk-QSUICCCD.js";import{b as T,c as W,d as L,e as N,f as k,g as I,j as q,k as B,l as F}from"./chunk-JLQQGME4.js";import"./chunk-XARGZZIY.js";import{f as R,g as V}from"./chunk-LE2T2ZCV.js";import"./chunk-4N62LD7P.js";import{$a as m,Da as S,Fb as M,Ia as v,Pa as h,Sa as p,W as c,Wa as i,X as u,Xa as o,Za as C,_a as b,ab as d,bb as P,cb as y,db as x,eb as f,fb as w,ia as g,ua as a,ya as _}from"./chunk-DDVZQDE5.js";import"./chunk-RW4GY4BD.js";function D(n,l){if(n&1&&(i(0,"div",2),d(1),o()),n&2){let t=m();a(),P(t.error())}}function j(n,l){n&1&&(i(0,"div",3),d(1," Password reset successfully! "),i(2,"a",7),d(3,"Login now"),o()())}function A(n,l){if(n&1){let t=C();i(0,"form",8),b("ngSubmit",function(){c(t);let e=m();return u(e.sendCode())}),i(1,"div")(2,"label",9),d(3,"Email"),o(),i(4,"input",10),w("ngModelChange",function(e){c(t);let s=m();return f(s.email,e)||(s.email=e),u(e)}),o()(),i(5,"button",11),d(6),o()()}if(n&2){let t=m();a(4),x("ngModel",t.email),a(),h("disabled",t.loading()),a(),y(" ",t.loading()?"Sending...":"Send Reset Code"," ")}}function G(n,l){if(n&1){let t=C();i(0,"form",8),b("ngSubmit",function(){c(t);let e=m();return u(e.resetPassword())}),i(1,"div")(2,"label",9),d(3,"Reset Code"),o(),i(4,"input",12),w("ngModelChange",function(e){c(t);let s=m();return f(s.code,e)||(s.code=e),u(e)}),o()(),i(5,"div")(6,"label",9),d(7,"New Password"),o(),i(8,"input",13),w("ngModelChange",function(e){c(t);let s=m();return f(s.newPassword,e)||(s.newPassword=e),u(e)}),o()(),i(9,"button",11),d(10),o()()}if(n&2){let t=m();a(4),x("ngModel",t.code),a(4),x("ngModel",t.newPassword),a(),h("disabled",t.loading()),a(),y(" ",t.loading()?"Resetting...":"Reset Password"," ")}}var Z=(()=>{let l=class l{constructor(r,e){this.authService=r,this.router=e,this.email="",this.code="",this.newPassword="",this.loading=g(!1),this.error=g(""),this.success=g(!1),this.codeSent=g(!1)}sendCode(){this.loading.set(!0),this.error.set(""),this.authService.resetSendCode(this.email).subscribe({next:()=>{this.codeSent.set(!0),this.loading.set(!1)},error:r=>{var e;this.error.set(((e=r.error)==null?void 0:e.message)||"Failed to send code"),this.loading.set(!1)}})}resetPassword(){this.loading.set(!0),this.error.set(""),this.authService.resetVerify(this.email,this.code,this.newPassword).subscribe({next:()=>{this.success.set(!0),this.loading.set(!1)},error:r=>{var e;this.error.set(((e=r.error)==null?void 0:e.message)||"Reset failed"),this.loading.set(!1)}})}};l.\u0275fac=function(e){return new(e||l)(_(E),_(R))},l.\u0275cmp=S({type:l,selectors:[["app-reset-password"]],decls:10,vars:3,consts:[[1,"bg-white","rounded-lg","shadow-sm","p-8"],[1,"text-2xl","font-semibold","text-gray-900","mb-6"],[1,"bg-red-50","text-red-600","p-3","rounded","mb-4","text-sm"],[1,"bg-green-50","text-green-600","p-3","rounded","mb-4","text-sm"],[1,"space-y-4"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/auth/login",1,"text-blue-600","hover:text-blue-700"],["routerLink","/auth/login",1,"underline","ml-2"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","email","name","email","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","bg-blue-600","text-white","py-2","px-4","rounded-md","hover:bg-blue-700","disabled:opacity-50",3,"disabled"],["type","text","name","code","required","","maxlength","6",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","password","name","newPassword","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h2",1),d(2,"Reset Password"),o(),v(3,D,2,1,"div",2)(4,j,4,0,"div",3)(5,A,7,3,"form",4)(6,G,11,4,"form",4),i(7,"div",5)(8,"a",6),d(9,"Back to login"),o()()()),e&2&&(a(3),p(s.error()?3:-1),a(),p(s.success()?4:-1),a(),p(s.codeSent()?6:5))},dependencies:[M,F,I,T,W,L,q,B,k,N,V],encapsulation:2});let n=l;return n})();export{Z as ResetPasswordComponent};
