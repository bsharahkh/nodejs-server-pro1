import{b as V,c as $,f as A,l as D}from"./chunk-JLQQGME4.js";import{a as P}from"./chunk-XARGZZIY.js";import{f as F}from"./chunk-LE2T2ZCV.js";import{a as I,b as j}from"./chunk-4N62LD7P.js";import{$a as c,Da as C,Fb as L,Ia as h,K as _,P as v,Sa as f,Ua as w,Va as y,W as k,Wa as a,X as x,Xa as r,Ya as B,Za as S,_a as g,ab as d,bb as b,db as T,eb as M,fb as E,ia as p,ua as l,ya as u}from"./chunk-DDVZQDE5.js";import"./chunk-RW4GY4BD.js";var N=(()=>{let e=class e{constructor(i){this.http=i,this.apiUrl=`${P.apiUrl}/access`}getAvailableBooks(i){let o=new I;return i&&Object.keys(i).forEach(n=>{i[n]&&(o=o.set(n,i[n]))}),this.http.get(`${this.apiUrl}/books`,{params:o})}};e.\u0275fac=function(o){return new(o||e)(v(j))},e.\u0275prov=_({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var O=(t,e)=>e.id;function z(t,e){t&1&&(a(0,"div",5),B(1,"div",7),r())}function R(t,e){t&1&&(a(0,"div",5)(1,"p",8),d(2,"No books available. Please subscribe to a tier."),r()())}function q(t,e){if(t&1&&(a(0,"p",12),d(1),r()),t&2){let s=c().$implicit;l(),b(s.description)}}function G(t,e){if(t&1){let s=S();a(0,"div",10),g("click",function(){let o=k(s).$implicit,n=c(2);return x(n.viewBook(o.id))}),a(1,"h3",11),d(2),r(),h(3,q,2,1,"p",12),r()}if(t&2){let s=e.$implicit;l(2),b(s.name),l(),f(s.description?3:-1)}}function J(t,e){if(t&1&&(a(0,"div",6),w(1,G,4,2,"div",9,O),r()),t&2){let s=c();l(),y(s.books())}}var ne=(()=>{let e=class e{constructor(i,o){this.accessService=i,this.router=o,this.books=p([]),this.loading=p(!1),this.searchTerm=""}ngOnInit(){this.loadBooks()}loadBooks(){this.loading.set(!0),this.accessService.getAvailableBooks({name:this.searchTerm,pageSize:100}).subscribe({next:i=>{this.books.set(i.items||[]),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}search(){this.loadBooks()}viewBook(i){this.router.navigate(["/books",i,"details"])}};e.\u0275fac=function(o){return new(o||e)(u(N),u(F))},e.\u0275cmp=C({type:e,selectors:[["app-book-list"]],decls:11,vars:2,consts:[[1,"max-w-7xl","mx-auto"],[1,"mb-6"],[1,"text-3xl","font-semibold","text-gray-900"],[1,"text-gray-600","mt-1"],["type","text","placeholder","Search books...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"text-center","py-12"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"text-gray-500"],[1,"bg-white","rounded-lg","shadow-sm","p-6","hover:shadow-md","transition-shadow","cursor-pointer","border","border-gray-200"],[1,"bg-white","rounded-lg","shadow-sm","p-6","hover:shadow-md","transition-shadow","cursor-pointer","border","border-gray-200",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-sm","text-gray-600"]],template:function(o,n){o&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),d(3,"My Books"),r(),a(4,"p",3),d(5,"Browse books available in your subscription"),r()(),a(6,"div",1)(7,"input",4),E("ngModelChange",function(m){return M(n.searchTerm,m)||(n.searchTerm=m),m}),g("ngModelChange",function(){return n.search()}),r()(),h(8,z,2,0,"div",5)(9,R,3,0,"div",5)(10,J,3,0,"div",6),r()),o&2&&(l(7),T("ngModel",n.searchTerm),l(),f(n.loading()?8:n.books().length===0?9:10))},dependencies:[L,D,V,$,A],encapsulation:2});let t=e;return t})();export{ne as BookListComponent};
