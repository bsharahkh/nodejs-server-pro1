import{a as O}from"./chunk-VRCABSLP.js";import{a as G}from"./chunk-T42BHAKM.js";import{a as W,b as F,c as I,d as L,e as j,f as P,g as R,j as q,l as z}from"./chunk-JLQQGME4.js";import"./chunk-XARGZZIY.js";import{g as T,k as N}from"./chunk-LE2T2ZCV.js";import"./chunk-4N62LD7P.js";import{$a as m,Da as y,Fb as V,Ia as w,Pa as S,Ra as M,Sa as v,Ua as B,Va as E,W as c,Wa as t,X as u,Xa as e,Ya as D,Za as C,_a as p,ab as n,bb as b,db as g,eb as f,fb as _,hb as A,ia as x,ua as s,ya as h}from"./chunk-DDVZQDE5.js";import{a as k}from"./chunk-RW4GY4BD.js";var H=a=>["/admin/books",a,"details"],J=(a,l)=>l.id;function K(a,l){a&1&&(t(0,"div",4),D(1,"div",7),e())}function Q(a,l){if(a&1){let o=C();t(0,"div",11)(1,"div",12)(2,"div",13),n(3,"Name"),e(),t(4,"div",14),n(5),e()(),t(6,"div",12)(7,"div",13),n(8,"Description"),e(),t(9,"div",15),n(10),e()(),t(11,"div",12)(12,"div",13),n(13,"Status"),e(),t(14,"span",16),n(15),e()(),t(16,"div",12)(17,"div",13),n(18,"Actions"),e(),t(19,"div",17)(20,"a",18),n(21,"Manage Details"),e(),t(22,"button",19),p("debounceClick",function(){let i=c(o).$implicit,d=m(2);return u(d.openEditModal(i))}),n(23,"Edit"),e(),t(24,"button",20),p("debounceClick",function(){let i=c(o).$implicit,d=m(2);return u(d.deleteBook(i.id))}),n(25,"Delete"),e()()()()}if(a&2){let o=l.$implicit;s(5),b(o.name),s(5),b(o.description||"-"),s(4),M(o.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),s(),b(o.active?"Active":"Inactive"),s(5),S("routerLink",A(6,H,o.id))}}function U(a,l){if(a&1&&(t(0,"div",5)(1,"div",8)(2,"div",9)(3,"div",10),n(4,"Name"),e(),t(5,"div",10),n(6,"Description"),e(),t(7,"div",10),n(8,"Status"),e(),t(9,"div",10),n(10,"Actions"),e()(),B(11,Q,26,8,"div",11,J),e()()),a&2){let o=m();s(11),E(o.books())}}function X(a,l){if(a&1){let o=C();t(0,"div",6)(1,"div",21)(2,"h3",22),n(3),e(),t(4,"form",23),p("ngSubmit",function(){c(o);let i=m();return u(i.saveBook())}),t(5,"div")(6,"label",24),n(7,"Name"),e(),t(8,"input",25),_("ngModelChange",function(i){c(o);let d=m();return f(d.formData.name,i)||(d.formData.name=i),u(i)}),e()(),t(9,"div")(10,"label",24),n(11,"Description"),e(),t(12,"textarea",26),_("ngModelChange",function(i){c(o);let d=m();return f(d.formData.description,i)||(d.formData.description=i),u(i)}),e()(),t(13,"div",27)(14,"input",28),_("ngModelChange",function(i){c(o);let d=m();return f(d.formData.active,i)||(d.formData.active=i),u(i)}),e(),t(15,"label",29),n(16,"Active"),e()(),t(17,"div",30)(18,"button",31),n(19," Save "),e(),t(20,"button",32),p("debounceClick",function(){c(o);let i=m();return u(i.closeModal())}),n(21," Cancel "),e()()()()()}if(a&2){let o=m();s(3),b(o.editingBook()?"Edit Book":"Create Book"),s(5),g("ngModel",o.formData.name),s(4),g("ngModel",o.formData.description),s(2),g("ngModel",o.formData.active)}}var le=(()=>{let l=class l{constructor(r){this.bookService=r,this.books=x([]),this.loading=x(!1),this.showModal=x(!1),this.editingBook=x(null),this.formData={name:"",description:"",active:!0}}ngOnInit(){this.loadBooks()}loadBooks(){this.loading.set(!0),this.bookService.list({pageSize:100}).subscribe({next:r=>{this.books.set(r.items||[]),this.loading.set(!1)},error:()=>this.loading.set(!1)})}openCreateModal(){this.editingBook.set(null),this.formData={name:"",description:"",active:!0},this.showModal.set(!0)}openEditModal(r){this.editingBook.set(r),this.formData=k({},r),this.showModal.set(!0)}closeModal(){this.showModal.set(!1)}saveBook(){(this.editingBook()?this.bookService.update(this.editingBook().id,this.formData):this.bookService.create(this.formData)).subscribe({next:()=>{this.closeModal(),this.loadBooks()}})}deleteBook(r){confirm("Are you sure?")&&this.bookService.delete(r).subscribe(()=>this.loadBooks())}};l.\u0275fac=function(i){return new(i||l)(h(O))},l.\u0275cmp=y({type:l,selectors:[["app-admin-books"]],decls:9,vars:2,consts:[[1,"max-w-7xl","mx-auto"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-semibold","text-gray-900"],["appDebounceClick","",1,"btn","btn-primary",3,"debounceClick"],[1,"text-center","py-12"],[1,"bg-white","rounded-lg","shadow-sm","overflow-hidden"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","p-4","z-50"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"divide-y","divide-gray-200"],[1,"hidden","md:grid","md:grid-cols-4","bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"p-4","sm:p-5","md:grid","md:grid-cols-4","md:items-center","md:gap-x-4","space-y-3","md:space-y-0"],[1,"md:px-6","md:py-4"],[1,"md:hidden","text-[11px]","tracking-wide","font-medium","text-gray-500","uppercase","mb-1"],[1,"text-sm","leading-6","font-medium","text-gray-900"],[1,"text-sm","leading-6","text-gray-600"],[1,"inline-block","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"flex","flex-wrap","gap-2"],[1,"btn","btn-ghost","btn-sm",3,"routerLink"],["appDebounceClick","",1,"btn","btn-outline","btn-sm",3,"debounceClick"],["appDebounceClick","",1,"btn","btn-danger","btn-sm",3,"debounceClick"],[1,"bg-white","rounded-lg","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","name","name","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","description","rows","3",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","items-center"],["type","checkbox","name","active","id","active",1,"h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded",3,"ngModelChange","ngModel"],["for","active",1,"ml-2","text-sm","text-gray-700"],[1,"flex","gap-3"],["type","submit",1,"flex-1","bg-blue-600","text-white","py-2","px-4","rounded-md","hover:bg-blue-700"],["type","button","appDebounceClick","",1,"flex-1","bg-gray-200","text-gray-800","py-2","px-4","rounded-md","hover:bg-gray-300",3,"debounceClick"]],template:function(i,d){i&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Manage Books"),e(),t(4,"button",3),p("debounceClick",function(){return d.openCreateModal()}),n(5," Add Book "),e()(),w(6,K,2,0,"div",4)(7,U,13,0,"div",5)(8,X,22,4,"div",6),e()),i&2&&(s(6),v(d.loading()?6:7),s(2),v(d.showModal()?8:-1))},dependencies:[V,z,R,F,W,I,L,q,P,j,N,T,G],encapsulation:2});let a=l;return a})();export{le as AdminBooksComponent};
